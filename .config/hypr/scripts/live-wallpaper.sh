#!/bin/bash\n# Live Wallpaper Desktop Script\n# Uses mpvpaper to play video wallpapers on desktop\n\nVIDEO_DIR="$HOME/.config/hypr/wallpapers/live-wallpapers"\nPIDFILE="/tmp/mpvpaper-desktop.pid"\n\n# Find a video file\nfind_video() {\n    if [ -d "$VIDEO_DIR" ]; then\n        VIDEO=$(find "$VIDEO_DIR" -type f \( -iname "*.mp4" -o -iname "*.webm" -o -iname "*.mkv" -o -iname "*.mov" \) 2>/dev/null | head -n1)\n        if [ -n "$VIDEO" ]; then\n            echo "$VIDEO"\n            return 0\n        fi\n    fi\n    return 1\n}\n\n# Check if mpvpaper is installed\nif ! command -v mpvpaper &> /dev/null; then\n    echo "mpvpaper not installed! Install with: yay -S mpvpaper"\n    echo "Falling back to hyprpaper for static wallpapers..."\n    hyprpaper &\n    exit 0\nfi\n\ncase "$1" in\n    start)\n        # Stop existing\n        if [ -f "$PIDFILE" ]; then\n            kill $(cat "$PIDFILE") 2>/dev/null\n            rm -f "$PIDFILE"\n        fi\n        pkill -x mpvpaper 2>/dev/null\n        \n        VIDEO=$(find_video)\n        if [ -z "$VIDEO" ]; then\n            echo "No video found, using static wallpaper"\n            hyprpaper &\n            exit 0\n        fi\n        \n        echo "Starting live wallpaper: $VIDEO"\n        \n        # Get all monitors\n        MONITORS=$(hyprctl monitors -j 2>/dev/null | jq -r '.[].name' 2>/dev/null)\n        if [ -z "$MONITORS" ]; then\n            MONITORS="HDMI-A-1"\n        fi\n        \n        # Start mpvpaper on each monitor\n        for MON in $MONITORS; do\n            mpvpaper --mpv-options "--loop --no-audio --no-osc" "$MON" "$VIDEO" &\n        done\n        \n        echo $! > "$PIDFILE"\n        echo "Live wallpaper started!"\n        ;;\n        \n    stop)\n        echo "Stopping live wallpaper..."\n        if [ -f "$PIDFILE" ]; then\n            kill $(cat "$PIDFILE") 2>/dev/null\n            rm -f "$PIDFILE"\n        fi\n        pkill -x mpvpaper 2>/dev/null\n        # Restart hyprpaper\n        hyprpaper &\n        ;;\n        \n    restart)\n        $0 stop\n        sleep 1\n        $0 start\n        ;;\n        \n    status)\n        if pgrep -x mpvpaper > /dev/null; then\n            echo "Live wallpaper is RUNNING"\n            pgrep -a mpvpaper\n        else\n            echo "Live wallpaper is STOPPED"\n        fi\n        ;;\n        \n    *)\n        echo "Usage: $0 {start|stop|restart|status}"\n        echo ""\n        echo "Live wallpaper for Hyprland desktop"\n        echo "Requires: mpvpaper (yay -S mpvpaper)"\n        exit 1\n        ;;\nesac\n