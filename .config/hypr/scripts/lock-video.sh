#!/bin/bash\n# Hyprlock Video Wallpaper Hack\n# Starts mpvpaper video wallpaper then launches hyprlock\n# The video continues playing behind the lock screen!\n\nVIDEO_DIR="$HOME/.config/hypr/wallpapers/live-wallpapers"\nHYPRLOCK_CONFIG="$HOME/.config/hypr/hyprlock-video.conf"\n\n# Find a video file\nfind_video() {\n    if [ -d "$VIDEO_DIR" ]; then\n        # Look for video files\n        VIDEO=$(find "$VIDEO_DIR" -type f \( -iname "*.mp4" -o -iname "*.webm" -o -iname "*.mkv" -o -iname "*.mov" \) 2>/dev/null | head -n1)\n        if [ -n "$VIDEO" ]; then\n            echo "$VIDEO"\n            return 0\n        fi\n    fi\n    return 1\n}\n\n# Check if mpvpaper is installed\nif ! command -v mpvpaper &> /dev/null; then\n    echo "mpvpaper not installed! Install with: yay -S mpvpaper"\n    # Fallback to regular hyprlock\n    hyprlock\n    exit 0\nfi\n\n# Get video file\nVIDEO=$(find_video)\n\nif [ -z "$VIDEO" ]; then\n    echo "No video wallpaper found in $VIDEO_DIR"\n    echo "Falling back to static wallpaper lock screen..."\n    hyprlock\n    exit 0\nfi\n\necho "Using video: $VIDEO"\n\n# Get primary monitor\nMONITOR=$(hyprctl monitors -j 2>/dev/null | jq -r '.[] | select(.focused==true) | .name' 2>/dev/null)\nif [ -z "$MONITOR" ]; then\n    MONITOR="HDMI-A-1"  # fallback\nfi\n\n# Kill any existing mpvpaper\npkill -x mpvpaper 2>/dev/null\n\n# Start mpvpaper in background with overlay layer\n# This puts the video on a layer BELOW hyprlock but ABOVE desktop\nmpvpaper --layer overlay --mpv-options "--loop --no-audio --no-osc --no-osd-bar" "$MONITOR" "$VIDEO" &\nMPVPAPER_PID=$!\n\n# Small delay to let video start\nsleep 0.3\n\n# Launch hyprlock with NO background (video shows through!)\n# Using the special video config that has no background block\nif [ -f "$HYPRLOCK_CONFIG" ]; then\n    hyprlock --config "$HYPRLOCK_CONFIG"\nelse\n    hyprlock\nfi\n\n# Kill mpvpaper when hyprlock exits\nkill $MPVPAPER_PID 2>/dev/null\nwait $MPVPAPER_PID 2>/dev/null\n\n# Restart hyprpaper for desktop wallpaper\nhyprpaper &\n